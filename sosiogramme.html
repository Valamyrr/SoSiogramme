<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="https://valamyrr.github.io/SoSiogramme/style.css">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baskervville:ital@0;1&family=Bodoni+Moda+SC:ital,opsz,wght@0,6..96,400..900;1,6..96,400..900&family=Cinzel:wght@400..900&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 

</head>
<body><div class="sidebar">
  <div style="margin-bottom: 10px; padding-bottom: 0px;" class="sidebar-section">
    <h3>Description</h3>
    <div style="height: 1px; background: linear-gradient(-90deg, #0d0d0d4a 10%, #ea731c 40%, #c21208 100%); margin-bottom: 15px;"></div>
    <p>Cliquez sur un personnage pour afficher ses relations. Cliquez à nouveau pour les masquer.</p>
    <button id="resetBtn">Tout réinitialiser</button>
  </div>

  <div class="sidebar-section">
    <h3>Rechercher</h3>
    <div style="height: 1px; background: linear-gradient(-90deg, #0d0d0d4a 10%, #ea731c 40%, #c21208 100%); margin-bottom: 15px;"></div>
    <input style="margin-bottom: -20px;" type="text" id="searchName" placeholder="Nom du personnage...">
  </div>

  <div style="margin-top: 10px; margin-bottom: 0px; padding-bottom: 0px;" class="sidebar-section">
    <h3 style="margin-top: -15px;">Relations</h3>
    <div style="height: 1px; background: linear-gradient(-90deg, #0d0d0d4a 10%, #ea731c 40%, #c21208 100%); margin-bottom: 15px;"></div>
    <label><input type="checkbox" checked data-type="affection">Affection</label>
    <label><input type="checkbox" checked data-type="alliance">Alliance</label>
    <label><input type="checkbox" checked data-type="enfance">Amis d'enfance</label>
    <label><input type="checkbox" checked data-type="amour">Amour</label>
    <label><input type="checkbox" checked data-type="amitié">Amitié</label>
    <label><input type="checkbox" checked data-type="compliqué">Compliqué</label>
    <label><input type="checkbox" checked data-type="divorcés">Ex/divorcés</label>
    <label><input type="checkbox" checked data-type="famille">Famille</label>
    <label><input type="checkbox" checked data-type="fratrie">Fratrie gardienne</label>
    <label><input type="checkbox" checked data-type="guidance">Mentor - disciple</label>
    <label><input type="checkbox" checked data-type="hostilité">Hostilité</label>
    <label><input type="checkbox" checked data-type="mépris">Mépris</label>
    <label><input type="checkbox" checked data-type="obsession">Obsession</label>
    <label><input type="checkbox" checked data-type="oublié">Oublié</label>
    <label><input type="checkbox" checked data-type="respecte">Respect</label>
    <label><input type="checkbox" checked data-type="rivalité">Rivalité</label>
    <label><input type="checkbox" checked data-type="servilité">Servilité</label>
    <label><input type="checkbox" checked data-type="tolère">Tolérance</label>
    <label><input type="checkbox" checked data-type="trahison">Trahison</label>
  </div>

    <button id="toggleRelationsBtn" style="margin-top: 10px;">Tout décocher</button>
      
  <div style="margin-top: 10px; margin-bottom: 10px; padding-bottom: 0px;" class="sidebar-section">
    <h3>Groupes</h3>
    <div style="height: 1px; background: linear-gradient(-90deg, #0d0d0d4a 10%, #ea731c 40%, #c21208 100%); margin-bottom: 15px;"></div>
    <label style="color: #6ac889;"><input type="checkbox" checked data-group="Ariestiens">Ariestiens</label>
    <label style="color: #C21108;"><input type="checkbox" checked data-group="Terriens">Terriens</label>
    <label style="color: #F08C00;"><input type="checkbox" checked data-group="Gardiens">Gardiens</label>
    <label style="color: #289DDC;"><input type="checkbox" checked data-group="Elus">Élus</label>
    <label style="color: #8956E8;"><input type="checkbox" checked data-group="Damnés">Damnés</label>
  </div>
      
    <button id="toggleGroupesBtn" style="margin-top: 10px;">Tout décocher</button>
      
</div><div id="graphe-container">
  <svg id="graphe">
    <defs id="arrowDefs"></defs>
  </svg>
</div>

      
      <!-- Modal pour ajouter un personnage --><div class="modal-overlay" id="addPersoModal">
  <div class="modal-content">
    <h2>Ajouter mon personnage</h2>
    
    <div class="instructions">
      <p><strong>Instructions :</strong><br/>
       Remplissez ce formulaire pour générer les relations de votre personnage. 
        <br/>Vous devez impérativement :
        <br/>❖ Remplir le nom du personnage
        <br/>❖ Fournir une image en 100x100px hébergée 
        <br/>❖ Sélectionner le groupe du personnage
        <br/>
        <br/>Une fois ces étapes faites, cliquez sur le bouton "ajouter une relation". 
        <br/>Vous pourrez alors choisir le personnage concerné et définir votre relation avec ce dernier. 
        <br/>Une fois le code généré, copiez-le et envoyez le sur le channel dédié sur discord pour qu'un administrateur l'ajoute au sociogramme.</p>
    </div>
    
    <div class="form-group">
      <label for="persoNom">Nom du personnage *</label>
      <input type="text" id="persoNom" placeholder="Ex: Yang" required>
        <small style="color: #8999AC; font-size: 11px; font-family: 'Merriweather';">Mettez uniquement le prénom ou surnom ou la façon dont on désigne votre personnage.</small>
    </div>
    
    <div class="form-group">
      <label for="persoImage">URL de l'image *</label>
      <input type="text" id="persoImage" placeholder="https://i.ibb.co/xxxxx/image.png" required>
      <small style="color: #8999AC; font-size: 11px; font-family: 'Merriweather';">Hébergez votre image 100x100 sur imgur.com ou autre site du genre</small>
    </div>
    
    <div class="form-group">
      <label for="persoGroupe">Groupe *</label>
      <select id="persoGroupe" required>
        <option value="">-- Sélectionnez un groupe --</option>
        <option value="Ariestiens">Ariestiens</option>
        <option value="Terriens">Terriens</option>
        <option value="Gardiens">Gardiens</option>
        <option value="Elus">Élus</option>
        <option value="Damnés">Damnés</option>
      </select>
    </div>
    
    <div class="form-group">
      <label>Relations</label>
            <small style="color: #8999AC; font-size: 11px; font-family: 'Merriweather';">L'ordre des relations n'a pas d'importance. Si vous souhaitez renseigner une relation avec le personnage d'un membre, coordonnez-vous pour que UN SEUL d'entre vous la déclare ! (elles apparaissent en double sinon)</small>
      <div id="relationsContainer"></div>
      <button type="button" id="addRelationBtn" style="width: 100%; padding: 8px; background: rgba(19, 19, 19, 0.6); border: none; color: #a79c99; font-size: 11px; font-family: 'Merriweather'; text-transform: uppercase; cursor: pointer; border-radius: 5px; margin-top: 10px;">+ Ajouter une relation</button>
    </div>
    
    <div class="modal-buttons">
      <button type="button" id="generateCodeBtn">Générer le code</button>
      <button type="button" id="closeModalBtn">Annuler</button>
    </div>
    
    <div class="code-output" id="codeOutput">
      <div class="code-block">
        <h3>Bloc 1 : Personnage</h3>
        <pre id="codePerso"></pre>
        <button onclick="copyCode('codePerso')">Copier</button>
      </div>
      
      <div class="code-block" id="codeRelationsBlock" style="display: none;">
        <h3>Bloc 2 : Relations</h3>
        <pre id="codeRelations"></pre>
        <button onclick="copyCode('codeRelations')">Copier</button>
      </div>
      
      <div class="instructions" style="margin-top: 15px;">
        <p><strong>Prochaines étapes :</strong><br/>
        1. Copiez les deux blocs de code ci-dessus<br/>
        2. Dans votre post dans le salon #relations sur discord<br/>
          3. Envoyez les codes précédemments copiés<br/>
        4. Attendez patiemment qu'un admin passe vous ajouter !</p>
      </div>
    </div>
  </div>
</div>
 
    <!-- Modal pour ajouter des relations à un personnage existant --><div class="modal-overlay" id="updatePersoModal">
  <div class="modal-content">
    <h2>Ajouter des relations</h2>
    
    <div class="instructions">
      <p><strong>Instructions :</strong><br/>
       Utilisez ce formulaire pour ajouter de nouvelles relations à votre personnage existant.
        <br/>❖ Sélectionnez votre personnage dans la liste
        <br/>❖ Ajoutez vos nouvelles relations
        <br/>❖ Générez le code et envoyez le dans votre post dans le channel #relations du discord
        <br/>
        <br/>Note : Coordonnez-vous avec les autres membres pour éviter les doublons de relations.</p>
    </div>
    
    <div class="form-group">
      <label for="updatePersoSelect">Mon personnage *</label>
      <div style="position: relative;">
        <input type="text" 
               id="updatePersoSearch" 
               placeholder="Rechercher mon personnage..."
               autocomplete="off"
               style="width: 100%; padding: 10px; background: rgba(13, 13, 13, 0.8); border: 1px solid #3a3a3a; color: #a79c99; font-family: 'Cinzel'; font-size: 14px; border-radius: 5px; box-sizing: border-box;">
        <div id="updatePersoResults" style="display: none; position: absolute; top: 100%; left: 0; right: 0; background: rgba(13, 13, 13, 0.95); border: 1px solid #c21208; border-radius: 5px; max-height: 200px; overflow-y: auto; z-index: 1000; margin-top: 5px;"></div>
        <input type="hidden" id="updatePersoSelect" value="">
      </div>
      <small style="color: #8999AC; font-size: 11px; font-family: 'Merriweather';">Tapez le nom de votre personnage pour le rechercher</small>
    </div>
    
    <div class="form-group">
      <label>Nouvelles relations</label>
      <small style="color: #8999AC; font-size: 11px; font-family: 'Merriweather';">Ajoutez uniquement les nouvelles relations que vous souhaitez créer.</small>
      <div id="updateRelationsContainer"></div>
      <button type="button" id="addUpdateRelationBtn" style="width: 100%; padding: 8px; background: rgba(19, 19, 19, 0.6); border: none; color: #a79c99; font-size: 11px; font-family: 'Merriweather'; text-transform: uppercase; cursor: pointer; border-radius: 5px; margin-top: 10px;">+ Ajouter une relation</button>
    </div>
    
    <div class="modal-buttons">
      <button type="button" id="generateUpdateCodeBtn">Générer le code</button>
      <button type="button" id="closeUpdateModalBtn">Annuler</button>
    </div>
    
    <div class="code-output" id="updateCodeOutput">
      <div class="code-block">
        <h3>Code des nouvelles relations</h3>
        <pre id="updateCodeRelations"></pre>
        <button onclick="copyCode('updateCodeRelations')">Copier</button>
      </div>
      
      <div class="instructions" style="margin-top: 15px;">
        <p><strong>Prochaines étapes :</strong><br/>
        1. Copiez le code ci-dessus<br/>
        2. Postez-le dans le salon #relations sur discord<br/>
        3. Attendez qu'un admin l'ajoute à votre personnage!</p>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript" src="https://valamyrr.github.io/SoSiogramme/script.js"></script>
</body>
</html>
